name: Release

on:
    push:
        tags:
            - "*"

jobs:
    build:
        strategy:
            matrix:
                build: [
                    { name: Multibase_linux_x86, platform: linux/amd64, os: ubuntu-22.04 },
                    { name: Multibase_linux_arm, platform: linux/arm64, os: ubuntu-22.04 },
                    { name: Multibase_win_x86, platform: windows/amd64, os: windows-2022 },
                    { name: Multibase_win_arm, platform: windows/arm64, os: windows-2022 },
                    { name: Multibase_macos, platform: darwin/universal, os: macos-12 }
                ]
        runs-on: ${{ matrix.build.os }}
        steps:
            -   uses: actions/checkout@v2
            -   uses: dAppServer/wails-build-action@v2
                with:
                    build-name: ${{ matrix.build.name }}
                    build-platform: ${{ matrix.build.platform }}
                    go-version: 1.18
                    package: true
